var e,r;e=this,r=function(e){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function n(e,r,n,t,o,i){n&&(Array.isArray(o)?function(e,r,n,t,o,i){for(var a=Math.min(o.length,i.length),f=0;f<a;f++)if(e.assigned[f]&&o[f]!==i[f]){var u=r.concat(f);n.push({op:"replace",path:u,value:i[f]}),t.push({op:"replace",path:u,value:o[f]})}if(a<i.length){for(var c=a;c<i.length;c++){var s=r.concat(c);n.push({op:"add",path:s,value:i[c]})}t.push({op:"replace",path:r.concat("length"),value:o.length})}else if(a<o.length){n.push({op:"replace",path:r.concat("length"),value:i.length});for(var p=a;p<o.length;p++){var d=r.concat(p);t.push({op:"add",path:d,value:o[p]})}}}(e,r,n,t,o,i):function(e,r,n,t,o,i){v(e.assigned,function(e,a){var f=o[e],u=i[e],c=a?e in o?"replace":"add":"remove";if(f!==o||"replace"!==c){var s=r.concat(e);n.push("remove"===c?{op:c,path:s}:{op:c,path:s,value:u}),t.push("add"===c?{op:"remove",path:s}:"remove"===c?{op:"add",path:s,value:f}:{op:"replace",path:s,value:f})}})}(e,r,n,t,o,i))}var t,o,i,a="undefined"!=typeof Symbol?Symbol("immer-nothing"):(i=!0,(o="immer-nothing")in(t={})?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i,t),f="undefined"!=typeof Symbol?Symbol("immer-proxy-state"):"__$immer_state",u="An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.";var c=!("undefined"!=typeof process&&"production"===process.env.NODE_ENV||"verifyMinified"!==function(){}.name),s="undefined"!=typeof Proxy&&"undefined"!=typeof Reflect;function p(e){return!!e&&!!e[f]}function d(e){if(!e)return!1;if("object"!==(void 0===e?"undefined":r(e)))return!1;if(Array.isArray(e))return!0;var n=Object.getPrototypeOf(e);return null===n||n===Object.prototype}function l(e){return c&&Object.freeze(e),e}var h=Object.assign||function(e,r){for(var n in r)g(r,n)&&(e[n]=r[n]);return e};function y(e){if(Array.isArray(e))return e.slice();var r=void 0===e.__proto__?Object.create(null):{};return h(r,e)}function v(e,r){if(Array.isArray(e))for(var n=0;n<e.length;n++)r(n,e[n]);else for(var t in e)r(t,e[t])}function g(e,r){return Object.prototype.hasOwnProperty.call(e,r)}function m(e,r,t,o){if(p(e)){var i=e[f];if(!0===i.modified){if(!0===i.finalized)return i.copy;i.finalized=!0;var a=function(e,r,n,t,o){var i=r.base;return v(e,function(a,f){if(f!==i[a]){var u=t&&!g(r.assigned,a);e[a]=m(f,u&&n.concat(a),u&&t,o)}}),l(e)}(s?i.copy:i.copy=y(e),i,r,t,o);return n(i,r,t,o,i.base,a),a}return i.base}return function e(r){if(!d(r))return;if(Object.isFrozen(r))return;v(r,function(n,t){p(t)?r[n]=m(t):e(t)});l(r)}(e),e}function b(e,r){return e===r?0!==e||1/e==1/r:e!=e&&r!=r}var w=null,O={get:function(e,r){if(r===f)return e;if(e.modified){var n=e.copy[r];return n===e.base[r]&&d(n)?e.copy[r]=A(e,n):n}if(g(e.proxies,r))return e.proxies[r];var t=e.base[r];return!p(t)&&d(t)?e.proxies[r]=A(e,t):t},has:function(e,r){return r in x(e)},ownKeys:function(e){return Reflect.ownKeys(x(e))},set:function(e,r,n){if(e.assigned[r]=!0,!e.modified){if(r in e.base&&b(e.base[r],n)||g(e.proxies,r)&&e.proxies[r]===n)return!0;P(e)}return e.copy[r]=n,!0},deleteProperty:function(e,r){return e.assigned[r]=!1,P(e),delete e.copy[r],!0},getOwnPropertyDescriptor:function(e,r){var n=e.modified?e.copy:g(e.proxies,r)?e.proxies:e.base,t=Reflect.getOwnPropertyDescriptor(n,r);!t||Array.isArray(n)&&"length"===r||(t.configurable=!0);return t},defineProperty:function(){throw new Error("Immer does not support defining properties on draft objects.")},setPrototypeOf:function(){throw new Error("Immer does not support `setPrototypeOf()`.")}},j={};function x(e){return!0===e.modified?e.copy:e.base}function P(e){e.modified||(e.modified=!0,e.copy=y(e.base),Object.assign(e.copy,e.proxies),e.parent&&P(e.parent))}function A(e,r){if(p(r))throw new Error("Immer bug. Plz report.");var n=function(e,r){return{modified:!1,assigned:{},finalized:!1,parent:e,base:r,copy:void 0,proxies:{}}}(e,r),t=Array.isArray(r)?Proxy.revocable([n],j):Proxy.revocable(n,O);return w.push(t),t.proxy}v(O,function(e,r){j[e]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}}),j.deleteProperty=function(e,r){if(isNaN(parseInt(r)))throw new Error("Immer does not support deleting properties from arrays: "+r);return O.deleteProperty.call(this,e[0],r)},j.set=function(e,r,n){if("length"!==r&&isNaN(parseInt(r)))throw new Error("Immer does not support setting non-numeric properties on arrays: "+r);return O.set.call(this,e[0],r,n)};var E={},k=null;function z(e){return e.hasCopy?e.copy:e.base}function S(e){e.modified||(e.modified=!0,e.parent&&S(e.parent))}function _(e){e.hasCopy||(e.hasCopy=!0,e.copy=y(e.base))}function I(e,r){var n=y(r);v(r,function(e){var r;Object.defineProperty(n,""+e,E[r=""+e]||(E[r]={configurable:!0,enumerable:!0,get:function(){return function(e,r){N(e);var n=z(e)[r];return!e.finalizing&&n===e.base[r]&&d(n)?(_(e),e.copy[r]=I(e,n)):n}(this[f],r)},set:function(e){!function(e,r,n){if(N(e),e.assigned[r]=!0,!e.modified){if(b(z(e)[r],n))return;S(e),_(e)}e.copy[r]=n}(this[f],r,e)}}))});var t,o,i,a=function(e,r,n){return{modified:!1,assigned:{},hasCopy:!1,parent:e,base:n,proxy:r,copy:void 0,finished:!1,finalizing:!1,finalized:!1}}(e,n,r);return t=n,o=f,i=a,Object.defineProperty(t,o,{value:i,enumerable:!1,writable:!0}),k.push(a),n}function N(e){if(!0===e.finished)throw new Error("Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+JSON.stringify(e.copy||e.base))}function C(e){if(e&&"object"===(void 0===e?"undefined":r(e))){var n=e[f];if(n){var t,o,i,a,u=n.proxy,c=n.base;if(Array.isArray(e)){if(R(n)){if(S(n),n.assigned.length=!0,u.length<c.length)for(var s=u.length;s<c.length;s++)n.assigned[s]=!1;else for(var p=c.length;p<u.length;p++)n.assigned[p]=!0;v(u,function(e,r){n.assigned[e]||C(r)})}}else{var d=(t=c,o=u,i=Object.keys(t),{added:(a=Object.keys(o)).filter(function(e){return-1===i.indexOf(e)}),removed:i.filter(function(e){return-1===a.indexOf(e)})}),l=d.added,h=d.removed;(l.length>0||h.length>0)&&S(n),v(l,function(e,r){n.assigned[r]=!0}),v(h,function(e,r){n.assigned[r]=!1}),v(u,function(e,r){n.assigned[e]||C(r)})}}}}function D(e){return!function(e,n){if(b(e,n))return!0;if("object"!==(void 0===e?"undefined":r(e))||null===e||"object"!==(void 0===n?"undefined":r(n))||null===n)return!1;var t=Object.keys(e),o=Object.keys(n);if(t.length!==o.length)return!1;for(var i=0;i<t.length;i++)if(!hasOwnProperty.call(n,t[i])||!b(e[t[i]],n[t[i]]))return!1;return!0}(Object.keys(e.base),Object.keys(e.proxy))}function R(e){var r=e.proxy;if(r.length!==e.base.length)return!0;var n=Object.getOwnPropertyDescriptor(r,r.length-1);return!(!n||n.get)}function M(e,r,n){if(p(e)){var t=r.call(e,e);return void 0===t?e:t}var o=k;k=[];var i=n&&[],a=n&&[];try{var c=I(void 0,e),s=r.call(c,c);v(k,function(e,r){r.finalizing=!0});var d=void 0;if(void 0!==s&&s!==c){if(c[f].modified)throw new Error(u);d=m(s),i&&(i.push({op:"replace",path:[],value:d}),a.push({op:"replace",path:[],value:e}))}else n&&C(c),function(){for(var e=k.length-1;e>=0;e--){var r=k[e];!1===r.modified&&(Array.isArray(r.base)?R(r)&&S(r):D(r)&&S(r))}}(),d=m(c,[],i,a);return v(k,function(e,r){r.finished=!0}),n&&n(i,a),d}finally{k=o}}function F(e,n,t){if(arguments.length<1||arguments.length>3)throw new Error("produce expects 1 to 3 arguments, got "+arguments.length);if("function"==typeof e){if("function"==typeof n)throw new Error("if first argument is a function (curried invocation), the second argument to produce cannot be a function");var o=n,i=e;return function(){var e=arguments;return F(void 0===e[0]&&void 0!==o?o:e[0],function(r){return e[0]=r,i.apply(r,e)})}}if("function"!=typeof n)throw new Error("if first argument is not a function, the second argument to produce should be a function");if(void 0!==t&&"function"!=typeof t)throw new Error("the third argument of a producer should not be set or a function");if("object"!==(void 0===e?"undefined":r(e))||null===e){var a=n(e);return void 0===a?e:K(a)}if(!d(e))throw new Error("the first argument to an immer producer should be a primitive, plain object or array, got "+(void 0===e?"undefined":r(e))+': "'+e+'"');return K(s?function(e,r,n){if(p(e)){var t=r.call(e,e);return void 0===t?e:t}var o=w;w=[];var i=n&&[],a=n&&[];try{var c=A(void 0,e),s=r.call(c,c),d=void 0;if(void 0!==s&&s!==c){if(c[f].modified)throw new Error(u);d=m(s),i&&(i.push({op:"replace",path:[],value:d}),a.push({op:"replace",path:[],value:e}))}else d=m(c,[],i,a);return v(w,function(e,r){return r.revoke()}),n&&n(i,a),d}finally{w=o}}(e,n,t):M(e,n,t))}function K(e){return e===a?void 0:e}var U=F(function(e,n){for(var t=0;t<n.length;t++){var o=n[t],i=o.path;if(0===i.length&&"replace"===o.op)e=o.value;else{for(var a=e,f=0;f<i.length-1;f++)if(!(a=a[i[f]])||"object"!==(void 0===a?"undefined":r(a)))throw new Error("Cannot apply patch, path doesn't resolve: "+i.join("/"));var u=i[i.length-1];switch(o.op){case"replace":case"add":a[u]=o.value;break;case"remove":if(Array.isArray(a)){if(u!==a.length-1)throw new Error("Remove can only remove the last key of an array, index: "+u+", length: "+a.length);a.length-=1}else delete a[u];break;default:throw new Error("Unsupported patch operation: "+o.op)}}}return e}),J=a;e.produce=F,e.default=F,e.applyPatches=U,e.nothing=J,e.setAutoFreeze=function(e){c=e},e.setUseProxies=function(e){s=e},e.original=function(e){if(e&&e[f])return e[f].base},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(e.immer={});
//# sourceMappingURL=immer.umd.js.map
